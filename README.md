README
============================

This project is based on the [Yii 2](http://www.yiiframework.com/) Framework and the Yii 2
extension [yii2-cms](https://github.com/davidhirtz/yii2-cms/) by David Hirtz.

STRUCTURE
-------------------

      assets/             contains assets definition
      commands/           contains console commands (controllers)
      components/         contains components (application components and widgets)
      config/             contains application configurations
      controllers/        contains web controller classes
      mail/               contains view files for e-mails
      models/             contains model classes
      runtime/            contains files generated during runtime
      tests/              contains various tests for the basic application
      vendor/             contains dependent 3rd-party packages
      views/              contains view files for the web application
      web/                contains the entry script and web resources

REQUIREMENTS
------------

This project requires PHP 7.4 or higher and MySQL 8.x and ImageMagick. Detailed requirements can be found by running
Composer.


INSTALLATION
------------

Fetch source code via GIT.

~~~
git init
git remote add origin git@github.com:davidhirtz/REPOSITORY.git
git fetch origin
git branch master origin/master
git checkout master
~~~

If you do not have [Composer](http://getcomposer.org/), you may install it by following the instructions
at [getcomposer.org](http://getcomposer.org/doc/00-intro.md#installation-nix). On Linux and Mac OS X, you'll run the
following commands:

~~~
curl -sS https://getcomposer.org/installer | php
~~~

You can then install the dependencies using the following command:

~~~
php composer.phar install --no-dev
~~~

CONFIGURATION
-------------

### Credentials

Create file `config/params.php` with your sensitive information, which should not be added to the version control. The
file must include a cookie validation key, which can also be auto-generated by running the command below.

```php
<?php
return [
    'cookieValidationKey' => 'YOUR-COOKIE-VALIDATION-KEY',
];
```

~~~
php yii params
~~~

### Database

The database credentials are located in `config/db.php`. You can also run the migrations with the command below, which
will set up the database configuration before applying the migrations.

```php
<?php
return [
    'dsn' => 'mysql:host=127.0.0.1;dbname=DATABASE',
    'username' => 'USER',
    'password' => 'PASSWORD',
];
```

~~~
php yii migrate
~~~

### Permissions

Important: Directories `runtime` and `web/assets` need write permissions for web and console user.

### Staging

You can enable development mode by setting an environment variable `YII_ENV` to "dev" or "local". The latter is excluded
from version control.

### Assets

SCSS and Javascript assets are processed with [Gulp](https://gulpjs.com/) and will be automatically published.
